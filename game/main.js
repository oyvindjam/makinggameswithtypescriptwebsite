!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e,i){"use strict";e.__esModule=!0;var n=i(21),o=i(22),r=i(1),s=i(9),a=i(15);e.tVector2=new n.ObjectPoolManager(new o.ObjectPool(function(t,e){return new r.Vector2(t,e)},function(t,e,i){t.x=e,t.y=i})),e.tRectangle=new n.ObjectPoolManager(new o.ObjectPool(function(t,e,i,n){return new s.Rectangle(t,e,i,n)},function(t,e,i,n,o){t.x=e,t.y=i,t.width=n,t.height=o})),e.tLine=new n.ObjectPoolManager(new o.ObjectPool(function(t,e){return new a.Line(t,e)},function(t,e,i){t.p0=e,t.p1=i}));var l=[e.tVector2,e.tRectangle,e.tLine];e.releaseTemporaryPools=function(){for(var t=0,e=l;t<e.length;t++)e[t].release()}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0),o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.normalize=function(){var t=this.length();0!=t&&(this.x/=t,this.y/=t)},t.prototype.set=function(t,e){this.x=t,this.y=e},t}();e.Vector2=o,e.dot=function(t,e){return t.x*e.x+t.y*e.y},e.subtract=function(t,e){return n.tVector2.get(t.x-e.x,t.y-e.y)}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(9);e.TextureAtlas={groundLeft:new n.Rectangle(17,85,16,16),groundMiddle:new n.Rectangle(34,85,16,16),groundRight:new n.Rectangle(51,85,16,16),steelBarLeft:new n.Rectangle(17,17,16,16),steelBarMiddle:new n.Rectangle(34,17,16,16),steelBarRight:new n.Rectangle(51,17,16,16),steelBarStandTopLeft:new n.Rectangle(17,34,16,16),steelBarStandTopRight:new n.Rectangle(51,34,16,16),steelBarStandCenterLeft:new n.Rectangle(17,51,16,16),steelBarStandCenterRight:new n.Rectangle(51,51,16,16),steelBarStandBottomLeft:new n.Rectangle(17,51,16,20),steelBarStandBottomRight:new n.Rectangle(51,51,16,20),steelSideBar:new n.Rectangle(85,17,16,16),steelSideBarBottom:new n.Rectangle(85,34,16,16),steelTopBar:new n.Rectangle(102,17,16,16),steelTopBarRight:new n.Rectangle(119,17,16,16),steelTopBarLeft:new n.Rectangle(136,17,16,16),knife:new n.Rectangle(85,85,16,16),knifeUse0:new n.Rectangle(85,102,16,16),knifeUse1:new n.Rectangle(85,119,16,16),pistol:new n.Rectangle(102,85,16,16),machineGun:new n.Rectangle(119,85,16,16),handCannon:new n.Rectangle(136,85,16,16),pistolBullet:new n.Rectangle(102,102,5,3),machineGunBullet:new n.Rectangle(119,102,4,4),handCannonBullet:new n.Rectangle(136,102,7,9),guy0:new n.Rectangle(323,204,16,16),guy1:new n.Rectangle(340,204,16,16),guy2:new n.Rectangle(357,204,16,16),guy3:new n.Rectangle(374,204,16,16),guy4:new n.Rectangle(391,204,16,16),guy5:new n.Rectangle(408,204,16,16),guyRun0:new n.Rectangle(323,221,16,16),guyRun1:new n.Rectangle(340,221,16,16),guyRun2:new n.Rectangle(357,221,16,16),guyRun3:new n.Rectangle(374,221,16,16),guyDie0:new n.Rectangle(323,238,16,16),guyDie1:new n.Rectangle(340,238,16,16),guyDie2:new n.Rectangle(357,238,16,16),guyFall0:new n.Rectangle(323,255,16,16),guyFly0:new n.Rectangle(323,272,16,16),blueberry:new n.Rectangle(306,306,16,16),blueberryRun0:new n.Rectangle(323,306,16,16),blueberryRun1:new n.Rectangle(340,306,16,16),blueberryRun2:new n.Rectangle(357,306,16,16),blueberryRun3:new n.Rectangle(374,306,16,16),blueberryRun4:new n.Rectangle(391,306,16,16),blueberryRun5:new n.Rectangle(408,306,16,16),blueberryFall0:new n.Rectangle(323,323,16,16),blueberryFall1:new n.Rectangle(340,323,16,16),blueberryPart0:new n.Rectangle(357,323,16,16),blueberryPart1:new n.Rectangle(374,323,16,16),lemon:new n.Rectangle(306,354,16,19),lemonRun0:new n.Rectangle(323,354,16,19),lemonRun1:new n.Rectangle(340,354,16,19),lemonRun2:new n.Rectangle(357,354,16,19),lemonRun3:new n.Rectangle(374,354,16,19),lemonRun4:new n.Rectangle(391,354,16,19),lemonRun5:new n.Rectangle(408,354,16,19),lemonFall0:new n.Rectangle(323,374,16,16),lemonFall1:new n.Rectangle(340,374,16,16),lemonPart0:new n.Rectangle(357,374,16,16),lemonPart1:new n.Rectangle(374,374,16,16),melon:new n.Rectangle(272,425,33,33),melonRun0:new n.Rectangle(306,425,33,33),melonRun1:new n.Rectangle(340,425,33,33),melonRun2:new n.Rectangle(374,425,33,33),melonRun3:new n.Rectangle(408,425,33,33),melonRun4:new n.Rectangle(442,425,33,33),melonRun5:new n.Rectangle(476,425,33,33),melonFall0:new n.Rectangle(306,459,33,33),melonFall1:new n.Rectangle(340,459,33,33),melonPart0:new n.Rectangle(374,459,33,33),melonPart1:new n.Rectangle(408,459,33,33),melonPart2:new n.Rectangle(442,459,33,33),basket:new n.Rectangle(121,121,12,14),buttonShoot:new n.Rectangle(17,153,16,16),buttonJump:new n.Rectangle(34,153,16,16),buttonRight:new n.Rectangle(51,153,16,16),buttonLeft:new n.Rectangle(68,153,16,16),particle0:new n.Rectangle(187,134,1,1),particle2:new n.Rectangle(204,133,2,2),particle3:new n.Rectangle(221,132,3,3),particle4:new n.Rectangle(221,132,1,1),flare0:new n.Rectangle(119,80,3,4),flare1:new n.Rectangle(123,79,3,5),flare2:new n.Rectangle(127,75,3,9),"#000000":new n.Rectangle(272,17,8,8),"#222034":new n.Rectangle(281,17,8,8),"#45283c":new n.Rectangle(290,17,8,8),"#663931":new n.Rectangle(299,17,8,8),"#8f563b":new n.Rectangle(308,17,8,8),"#df7126":new n.Rectangle(317,17,8,8),"#d9a066":new n.Rectangle(326,17,8,8),"#eec39a":new n.Rectangle(335,17,8,8),"#fbf236":new n.Rectangle(272,26,8,8),"#99e550":new n.Rectangle(281,26,8,8),"#6abe30":new n.Rectangle(290,26,8,8),"#37946e":new n.Rectangle(299,26,8,8),"#4b692f":new n.Rectangle(308,26,8,8),"#524b24":new n.Rectangle(317,26,8,8),"#323c39":new n.Rectangle(326,26,8,8),"#3f3f74":new n.Rectangle(335,26,8,8),"#306082":new n.Rectangle(272,35,8,8),"#5b6ee1":new n.Rectangle(281,35,8,8),"#639bff":new n.Rectangle(290,35,8,8),"#5fcde4":new n.Rectangle(299,35,8,8),"#cbdbfc":new n.Rectangle(308,35,8,8),"#ffffff":new n.Rectangle(317,35,8,8),"#9badb7":new n.Rectangle(326,35,8,8),"#847e87":new n.Rectangle(335,35,8,8),"#696a6a":new n.Rectangle(272,44,8,8),"#595652":new n.Rectangle(281,44,8,8),"#76428a":new n.Rectangle(290,44,8,8),"#ac3232":new n.Rectangle(299,44,8,8),"#d95763":new n.Rectangle(308,44,8,8),"#d77bba":new n.Rectangle(317,44,8,8),"#8f974a":new n.Rectangle(326,44,8,8),"#8a6f30":new n.Rectangle(335,44,8,8),a:new n.Rectangle(66,183,7,11),b:new n.Rectangle(74,183,7,11),c:new n.Rectangle(82,183,7,11),d:new n.Rectangle(90,183,7,11),e:new n.Rectangle(98,183,7,11),f:new n.Rectangle(106,183,7,11),g:new n.Rectangle(114,183,7,11),h:new n.Rectangle(122,183,7,11),i:new n.Rectangle(133,183,2,11),j:new n.Rectangle(138,183,7,11),k:new n.Rectangle(146,183,7,11),l:new n.Rectangle(154,183,7,11),m:new n.Rectangle(162,183,7,11),n:new n.Rectangle(170,183,7,11),o:new n.Rectangle(178,183,7,11),p:new n.Rectangle(186,183,7,11),q:new n.Rectangle(194,183,7,11),r:new n.Rectangle(202,183,7,11),s:new n.Rectangle(210,183,7,11),t:new n.Rectangle(218,183,7,11),u:new n.Rectangle(226,183,7,11),v:new n.Rectangle(234,183,7,11),w:new n.Rectangle(242,183,7,11),x:new n.Rectangle(250,183,7,11),y:new n.Rectangle(258,183,7,11),z:new n.Rectangle(266,183,7,11),0:new n.Rectangle(204,158,7,11),1:new n.Rectangle(213,158,4,11),2:new n.Rectangle(220,158,7,11),3:new n.Rectangle(228,158,7,11),4:new n.Rectangle(236,158,7,11),5:new n.Rectangle(244,158,7,11),6:new n.Rectangle(252,158,7,11),7:new n.Rectangle(260,158,7,11),8:new n.Rectangle(268,158,7,11),9:new n.Rectangle(276,158,7,11),uiTopLeft:new n.Rectangle(272,85,4,4),uiTopCenter:new n.Rectangle(277,85,4,4),uiTopRight:new n.Rectangle(282,85,4,4),uiMiddleLeft:new n.Rectangle(272,90,4,4),uiMiddleCenter:new n.Rectangle(277,90,4,4),uiMiddleRight:new n.Rectangle(282,90,4,4),uiBottomLeft:new n.Rectangle(272,95,4,4),uiBottomCenter:new n.Rectangle(277,95,4,4),uiBottomRight:new n.Rectangle(282,95,4,4)}},function(t,e,i){"use strict";e.__esModule=!0,e.worldColumns=18,e.worldRows=14,e.tileSize=16,e.worldWidth=e.tileSize*e.worldColumns,e.worldHeight=e.tileSize*e.worldRows},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(0),r=i(23);function s(t,e,i,s,a){var l=n.subtract(a.p1,a.p0);l.normalize();var h=o.tVector2.get(l.y,-l.x),u=n.subtract(e,t);if(u.normalize(),n.dot(u,h)>0)return null;var c=i/2,p=s/2,d=Math.abs(l.x*c)+Math.abs(l.y*p),f=o.tVector2.get(a.p0.x-d*l.x,a.p0.y-d*l.y),g=o.tVector2.get(a.p1.x+d*l.x,a.p1.y+d*l.y),y=Math.abs(h.x*c)+Math.abs(h.y*p),m=o.tVector2.get(f.x+h.x*y,f.y+h.y*y),w=o.tVector2.get(g.x+h.x*y,g.y+h.y*y),x=o.tLine.get(m,w),v=o.tVector2.get(t.x+i/2,t.y+s/2),R=o.tVector2.get(e.x+i/2,e.y+s/2),b=o.tLine.get(v,R),A=r.findLineIntersection(x,b);return!!A&&o.tVector2.get(A.x-c,A.y-p)}function a(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}e.resolveCollision=function(t,e,i,r,a){var l=s(t,e,i,r,a);if(!l)return null;var h=n.subtract(a.p1,a.p0);h.normalize();var u=Math.abs(h.y),c=Math.abs(h.x),p=o.tVector2.get(e.x*(1-u)+l.x*u,e.y*(1-c)+l.y*c),d=o.tVector2.get(h.y,-h.x);return p.x+=.01*d.x,p.y+=.01*d.y,p},e.detectCollision=s,e.doRectanglesOverlap=function(t,e){var i=o.tRectangle.get(e.x-t.width/2,e.y-t.height/2,e.width+t.width,e.height+t.height);return a(o.tVector2.get(t.x+t.width/2,t.y+t.height/2),i)},e.isPointInsideRectangle=a},function(t,e,i){"use strict";e.__esModule=!0;var n=i(2),o=i(18),r=i(19),s=i(20),a=i(34),l=i(35),h=i(36),u=i(38),c=i(3),p=i(39),d=i(40),f=i(41),g=i(42),y=i(44),m=i(45),w=i(46),x=i(47),v=i(4),R=i(10),b=i(16),A=i(48),S=i(49),T=i(50),P=i(54),M=i(55),B=i(56),L=i(57),_=i(58),F=i(59),C=i(60),I=i(61),E=i(62),V=i(63),k=i(0),W=i(0),z=i(64),H=i(65),j=i(9);document.head.appendChild(document.createRange().createContextualFragment('<meta name="viewport" content="width=device-width, initial-scale=1">')),document.body.style.margin="0",document.body.style.overflow="hidden";var O=document.createElement("canvas");function U(){O.width=window.innerWidth,O.height=window.innerHeight}document.body.style.touchAction="none",document.body.appendChild(O),window.addEventListener("resize",U),U();var D=new F.NinePatch(n.TextureAtlas.uiTopLeft,n.TextureAtlas.uiTopCenter,n.TextureAtlas.uiTopRight,n.TextureAtlas.uiMiddleLeft,n.TextureAtlas.uiMiddleCenter,n.TextureAtlas.uiMiddleRight,n.TextureAtlas.uiBottomLeft,n.TextureAtlas.uiBottomCenter,n.TextureAtlas.uiBottomRight),G=new S.BulletSystem,N=h.level1,K=new l.Persistence;K.allowStorage||new m.CookieNotice(function(){return K.userAllowedStorage()});var J=0,X=K.getScore(),q=new o.AudioSystem,Y=q.load(R.basketPickup),Z=new Image;Z.src=i(66);var Q=function(){try{return new p.GraphicsWebGL(O)}catch(t){}try{return new y.GraphicsContext2D(O)}catch(t){}throw new Error("No graphics backend supported")}(),$=new a.GraphicsRenderer(Q),tt=new H.TranslationRenderer($),et=new I.ScaleRenderer(tt),it=new z.ClipRenderer(et);At();var nt=new w.SpriteRenderer(it,Z),ot=new b.ParticleSystem,rt=[],st=new f.ScreenShaker,at=[new P.Knife(nt,rt),new M.Pistol(nt,G,rt,q),new B.MachineGun(nt,G,st,rt,q),new L.HandCannon(nt,G,st,rt,q)],lt=new s.Player(q,N,st,ot,nt,rt,at[0]),ht=[];e.removeEnemy=function(t){ht.push(t)};var ut=[];e.addEnemy=function(t){ut.push(t)};var ct=new T.EnemySpawner(rt,nt,N),pt=new g.BasketPlacer(N,lt),dt=new g.WeaponPicker(at),ft=null;function gt(){var t=pt.randomLocation(),e=dt.nextWeapon();ft=new g.Basket(e,t)}gt();var yt=function(){function t(t,e){this.player=t,this.playerController=e}return t.prototype.pressLeft=function(){this.player.dead||this.playerController.pressLeft()},t.prototype.releaseLeft=function(){this.player.dead||this.playerController.releaseLeft()},t.prototype.pressRight=function(){this.player.dead||this.playerController.pressRight()},t.prototype.releaseRight=function(){this.player.dead||this.playerController.releaseRight()},t.prototype.pressActionButton1=function(){this.player.dead||this.playerController.pressActionButton1()},t.prototype.releaseActionButton1=function(){this.player.dead||this.playerController.releaseActionButton1()},t.prototype.pressActionButton2=function(){this.player.dead?function(){for(var t=0,e=rt;t<e.length;t++)e[t].getHitBy(k.tVector2.get(0,0),20);lt.dead=!1,J=0,lt.position.x=N.playerStartLocation.x,lt.position.y=N.playerStartLocation.y,gt()}():this.playerController.pressActionButton2()},t.prototype.releaseActionButton2=function(){this.player.dead||this.playerController.releaseActionButton2()},t}(),mt=new x.PlayerController(lt),wt=new yt(lt,mt);new r.KeyController(wt,["KeyA","ArrowLeft"],["KeyD","ArrowRight"],["KeyW","KeyX","KeyK","ArrowUp","Space"],["KeyJ","KeyZ"]);var xt=new u.PointerController(wt,O,et,tt);new d.GamepadController(wt);var vt,Rt=[],bt=new A.EventSystem;function At(){et.scale=Math.min(window.innerWidth/c.worldWidth,window.innerHeight/c.worldHeight),et.scale>1&&(et.scale=Math.floor(et.scale)),tt.xOffset=Math.round(window.innerWidth/2-c.worldWidth*et.scale/2),tt.yOffset=Math.round(window.innerHeight/2-c.worldHeight*et.scale/2)}e.submitScore=function(){J>X&&(X=J,K.saveScore(X))},e.gameDraw=function(){var t,e;Q.clear(32,32,32),it.clip(k.tRectangle.get(0,0,c.worldWidth,c.worldHeight)),t=n.TextureAtlas["#5fcde4"],e=k.tRectangle.get(0,0,c.worldWidth,c.worldHeight),it.image(e,t,Z,!1);for(var i=N.map.length-1;i>=0;i--)for(var o=0;o<N.map[i].length;o++){var r=N.map[i][o];r&&nt.sprite(o*c.tileSize,i*c.tileSize,r)}for(var s=0,a=rt;s<a.length;s++)a[s].draw();G.draw(),lt.draw(),ot.draw();for(var l=0,h=Rt;l<h.length;l++){var u=h[l];nt.sprite(u.x,u.y,n.TextureAtlas.pistolBullet,-1==u.direction)}_.drawText(c.worldWidth/2-_.measureTextWidth(J.toString())/2,2,J.toString(),nt),ft&&nt.sprite(ft.position.x,ft.position.y,ft.sprite),xt.draw(nt),lt.dead&&function(){C.drawNinePatch(k.tRectangle.get(c.worldWidth/2-75,50,150,50),D,nt);var t="highscore";_.drawText(c.worldWidth/2-_.measureTextWidth(t)/2,60,t,nt),t=X.toString(),_.drawText(c.worldWidth/2-_.measureTextWidth(t)/2,80,t,nt),C.drawNinePatch(k.tRectangle.get(c.worldWidth/2-75,110,150,30),D,nt),t="Shoot to start",_.drawText(c.worldWidth/2-_.measureTextWidth(t)/2,120,t,nt)}(),Q.present()},e.drawDebugCollision=function(){for(var t=0;t<N.map[0].length;t++)nt.sprite2(k.tRectangle.get(16*t,0,1,c.worldHeight),n.TextureAtlas["#8a6f30"]);for(t=0;t<N.map.length;t++)nt.sprite2(k.tRectangle.get(0,16*t,c.worldWidth,1),n.TextureAtlas["#8a6f30"]);function e(t,e){var i=Math.min(t.p0.x,t.p1.x),n=Math.max(t.p0.x,t.p1.x),o=Math.min(t.p0.y,t.p1.y),r=Math.max(t.p0.y,t.p1.y),s=k.tVector2.get(n-i,r-o),a=Math.max(1,s.x*c.tileSize),l=Math.max(1,s.y*c.tileSize),h=new j.Rectangle(i*c.tileSize,o*c.tileSize,a,l);nt.sprite2(h,e)}for(var i=0,o=N.collisionLines;i<o.length;i++){var r=o[i],s=k.tVector2.get(r.p1.x-r.p0.x,r.p1.y-r.p0.y);e(k.tLine.get(r.p0,k.tVector2.get(r.p0.x+s.y,r.p0.y+-s.x)),n.TextureAtlas["#d77bba"]),e(r,n.TextureAtlas["#fbf236"])}},function(t){t[t.menu=0]="menu",t[t.playing=1]="playing"}(vt=e.GameState||(e.GameState={})),e.gameState=vt.menu,e.gameUpdate=function(t){if(W.releaseTemporaryPools(),At(),bt.update(t),ot.update(t),st.update(t),tt.xOffset+=Math.round(st.x*et.scale),tt.yOffset+=Math.round(st.y*et.scale),lt.update(t),ft){var e=k.tRectangle.get(lt.position.x,lt.position.y,c.tileSize,c.tileSize),i=k.tRectangle.get(ft.position.x,ft.position.y,ft.sprite.width,ft.sprite.height);v.doRectanglesOverlap(e,i)&&(q.play(Y),lt.setWeapon(ft.weapon),J++,ft=null,bt.register(1,function(){return gt()}))}for(var n=0,o=rt;n<o.length;n++)(a=o[n]).update(t);for(var r=0,s=ht;r<s.length;r++){var a=s[r],l=rt.indexOf(a);-1!=l&&rt.splice(l,1)}ht.length=0,rt.push.apply(rt,ut),ut.length=0,G.update(t),lt.dead||ct.update(t)},E.startGameLoop(new V.GameUpdater(.016,3))},function(t,e,i){t.exports=i.p+"1d7d3283d791a6b76b3b6ca70f228fa1.webm"},function(t,e,i){t.exports=i.p+"570881c0355aff1abf5bb4c30025a38e.ogg"},function(t,e,i){"use strict";e.__esModule=!0,function(t){t[t.loop=0]="loop",t[t.once=1]="once"}(e.AnimationMode||(e.AnimationMode={}));var n=function(){return function(t,e){this.mode=t,this.frames=e}}();e.Animation=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}return t.prototype.set=function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n},t}();e.Rectangle=n},function(t,e,i){"use strict";e.__esModule=!0;var n=document.createElement("audio"),o={webm:n.canPlayType("audio/webm"),ogg:n.canPlayType("audio/ogg")};function r(t){for(var e=0,i=t;e<i.length;e++){var n=i[e],r=n.split(".")[1];if("webm"==r&&("maybe"==o.webm||"probably"==o.webm))return n;if("ogg"==r&&("maybe"==o.webm||"probably"==o.webm))return n}return null}e.playerJump=r([i(24),i(25)]),e.playerLand=r([i(6),i(7)]),e.playerDie=r([i(6),i(7)]),e.playerHitWall=r([i(6),i(7)]),e.useKnife=r([i(6),i(7)]),e.usePistol=r([i(26),i(27)]),e.useMachineGun=r([i(28),i(29)]),e.useHandCannon=r([i(30),i(31)]),e.theme=r([i(6),i(7)]),e.basketPickup=r([i(6),i(7)]),e.killEnemy=r([i(32),i(33)])},function(t,e,i){"use strict";e.__esModule=!0;var n=i(8),o=function(){function t(t){this.animation=t,this.time=0,this.currentFrame=0}return t.prototype.update=function(t){this.time+=t;var e=this.animation.frames[this.currentFrame];this.time>=e.seconds&&(this.time-=e.seconds,this.nextFrame())},t.prototype.nextFrame=function(){this.currentFrame++,this.currentFrame>=this.animation.frames.length&&(this.animation.mode==n.AnimationMode.once?this.currentFrame=this.animation.frames.length-1:this.currentFrame=0)},t.prototype.setAnimation=function(t){this.animation=t,this.reset()},t.prototype.currentSprite=function(){if(this.currentFrame>=this.animation.frames.length)throw new Error("Tried to get frame outside the range of the animation");return this.animation.frames[this.currentFrame].sprite},t.prototype.reset=function(){this.time=0,this.currentFrame=0},t}();e.AnimationPlayer=o,e.switchAnimation=function(t,e){e.animation!=t&&e.setAnimation(t)}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){return function(t,e){this.seconds=t,this.sprite=e}}();e.Frame=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(3);e.drawWrappedAroundBottom=function(t,e,i,o,r){if(void 0===r&&(r=!1),o.sprite(t,e,i,r),e+i.height>n.worldHeight){var s=e+i.height-n.worldHeight;o.sprite(t,-i.height+s,i,r)}}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(5),r=i(17),s=function(){function t(t,e,i){this.spriteRenderer=t,this.sprite=e,this.mirrored=i,this.position=new n.Vector2,this.velocity=new n.Vector2,this.time=0;var o=r.degreesToRadians(180*Math.random()),s=60+90*Math.random();this.velocity.x=Math.cos(o)*s,this.velocity.y=Math.sin(o)*s}return t.prototype.getHitBy=function(){},t.prototype.getBoundingRectangle=function(){return null},t.prototype.draw=function(){this.spriteRenderer.sprite(this.position.x,this.position.y,this.sprite,this.mirrored)},t.prototype.update=function(t){this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.velocity.y+=150*t,this.time+=t,this.time>=3&&o.removeEnemy(this)},t}();e.FlyingPart=s},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){return function(t,e){this.p0=t,this.p1=e}}();e.Line=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=function(){function t(){this.particles=[]}return t.prototype.update=function(t){this.particles=this.particles.filter(function(e){return e.update(t),e.isAlive()})},t.prototype.spawn=function(t){this.particles.push(t)},t.prototype.draw=function(){for(var t=0,e=this.particles;t<e.length;t++){e[t].draw()}},t}();e.ParticleSystem=o;var r=function(){function t(t,e,i,o,r){this.spriteRenderer=t,this.sprite=e,this.lifetime=i,this.time=0,this.position=new n.Vector2(0,0),this.velocity=new n.Vector2(0,0),this.gravity=120,this.position.x=o.x,this.position.y=o.y,this.velocity.x=r.x,this.velocity.y=r.y}return t.prototype.update=function(t){this.time+=t,this.velocity.y+=this.gravity*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t},t.prototype.isAlive=function(){return this.time<this.lifetime},t.prototype.draw=function(){this.spriteRenderer.sprite(this.position.x,this.position.y,this.sprite)},t}();e.PhysicsParticle=r},function(t,e,i){"use strict";e.__esModule=!0,e.degreesToRadians=function(t){return t*(2*Math.PI/360)},e.radiansToDegrees=function(t){return t*(360/(2*Math.PI))}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){return function(t){this.id=t}}();e.AudioIdentifier=n;var o=function(){function t(){this.context=new AudioContext,this.identifierToBuffer={},this.nextAudioIdentifierId=0,this.globalGainNode=this.context.createGain(),this.dest=this.globalGainNode,this.globalGainNode.connect(this.context.destination),this.globalGainNode.gain.value=.01,this.unlockContext()}return t.prototype.unlockContext=function(){var t=this;if("suspended"==this.context.state){var e=function(){t.context.resume(),window.removeEventListener("click",e),window.removeEventListener("keydown",e)};window.addEventListener("click",e),window.addEventListener("keydown",e)}},t.prototype.load=function(t,e){var i=this;void 0===e&&(e=function(){});var o=new n(this.nextAudioIdentifierId++);return null==t?o:(fetch(t).then(function(t){return t.arrayBuffer()}).then(function(t){return i.context.decodeAudioData(t)}).then(function(t){i.identifierToBuffer[o.id]=t,e(o)}).catch(function(e){console.log("AudioSystem: Failed to load "+t,e)}),o)},t.prototype.play=function(t){var e=this.identifierToBuffer[t.id];if(e){var i=this.context.createBufferSource();i.buffer=e,i.connect(this.dest),i.start()}},t}();e.AudioSystem=o},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){return function(t,e,i,n,o){window.addEventListener("keydown",function(r){r.repeat||(e.includes(r.code)?t.pressLeft():i.includes(r.code)?t.pressRight():n.includes(r.code)?t.pressActionButton1():o.includes(r.code)&&t.pressActionButton2())}),window.addEventListener("keyup",function(r){e.includes(r.code)?t.releaseLeft():i.includes(r.code)?t.releaseRight():n.includes(r.code)?t.releaseActionButton1():o.includes(r.code)&&t.releaseActionButton2()})}}();e.KeyController=n},function(t,e,i){"use strict";e.__esModule=!0;var n,o=i(3),r=i(1),s=i(4),a=i(9),l=i(10),h=i(16),u=i(2),c=i(5),p=i(17),d=i(11),f=i(8),g=i(12),y=i(0);!function(t){t[t.left=-1]="left",t[t.right=1]="right"}(n=e.Facing||(e.Facing={}));var m=function(){function t(t,e,i,o,s,a,h){this.audioSystem=t,this.level=e,this.screenShaker=i,this.particleSystem=o,this.renderer=s,this.enemies=a,this.weapon=h,this.timeSinceStartedFalling=0,this.timeSinceStartedJump=0,this.jumped=!1,this.jumping=!1,this.shooting=!1,this.maxRunSpeed=135,this.idle=x.idle,this.dieAnimation=x.die,this.run=x.run,this.fall=x.fall,this.fly=x.fly,this.animationPlayer=new d.AnimationPlayer(this.idle),this.facingDirection=n.left,this.position=new r.Vector2,this.velocity=new r.Vector2,this.dead=!1,this.deathTime=1,this.jumpSound=this.audioSystem.load(l.playerJump),this.position.x=e.playerStartLocation.x,this.position.y=e.playerStartLocation.y,this.velocity.y=1}return t.prototype.getBoundingRectangle=function(){var t=this.animationPlayer.currentSprite();return y.tRectangle.get(this.position.x+2,this.position.y+3,t.width-5,t.height-6)},t.prototype.shoot=function(){this.dead||this.weapon.use()},t.prototype.land=function(){this.timeSinceStartedFalling>.1&&(this.spawnLandParticles(),this.screenShaker.addTrauma(.3)),this.timeSinceStartedFalling=0,this.velocity.y=0,this.jumped=!1},t.prototype.spawnLandParticles=function(){for(var t=Math.floor(5+5*Math.random()),e=0;e<t;e++){var i=p.degreesToRadians(50*Math.random()-25-90),n=10*Math.random()-5+40,s=new r.Vector2(Math.cos(i)*n,Math.sin(i)*n),a=new r.Vector2(this.position.x+o.tileSize/2,this.position.y+o.tileSize),l=.05+.15*Math.random(),c=new h.PhysicsParticle(this.renderer,u.TextureAtlas.particle0,l,a,s);this.particleSystem.spawn(c)}},t.prototype.startJump=function(){this.dead||this.jumped||this.timeSinceStartedFalling<.1&&(this.velocity.y=-190,this.jumped=!0,this.jumping=!0,this.audioSystem.play(this.jumpSound))},t.prototype.stopJump=function(){this.timeSinceStartedJump=0,this.jumping=!1},t.prototype.startShoot=function(){this.shooting=!0},t.prototype.stopShoot=function(){this.shooting=!1},t.prototype.startLeft=function(){this.dead||(this.velocity.x=-this.maxRunSpeed,this.facingDirection=n.left)},t.prototype.stopLeft=function(){this.dead||this.velocity.x<0&&(this.velocity.x=0)},t.prototype.startRight=function(){this.dead||(this.velocity.x=this.maxRunSpeed,this.facingDirection=n.right)},t.prototype.stopRight=function(){this.velocity.x>0&&(this.velocity.x=0)},t.prototype.update=function(t){this.dead&&(this.animationPlayer.update(t),d.switchAnimation(this.dieAnimation,this.animationPlayer)),this.velocity.y>0&&(this.timeSinceStartedFalling+=t),this.jumping&&(this.timeSinceStartedJump+=t,this.timeSinceStartedJump<.2&&(this.velocity.y=-190)),this.shooting&&this.shoot(),this.dead||(0==this.velocity.x?d.switchAnimation(this.idle,this.animationPlayer):d.switchAnimation(this.run,this.animationPlayer),this.velocity.y>0&&d.switchAnimation(this.fall,this.animationPlayer),this.velocity.y<0&&d.switchAnimation(this.fly,this.animationPlayer)),this.animationPlayer.update(t);var e=y.tVector2.get(this.position.x,this.position.y);this.velocity.y+=550*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t;for(var i=0,n=this.level.collisionLines;i<n.length;i++){var r=n[i],l=s.resolveCollision(e,this.position,o.tileSize,o.tileSize,r);l&&(l.y<this.position.y&&this.land(),this.position.set(l.x,l.y))}if(this.position.y>o.worldHeight&&(e.y=this.position.y-o.worldHeight,this.position.y=0),this.weapon.position.x=this.position.x+o.tileSize*this.facingDirection,this.weapon.position.y=this.position.y,this.weapon.direction=this.facingDirection,this.weapon.update(t),!this.dead)for(var h=0,u=this.enemies;h<u.length;h++){var c=u[h].getBoundingRectangle();if(c){var p=new a.Rectangle(this.position.x,this.position.y,this.animationPlayer.currentSprite().width,this.animationPlayer.currentSprite().height);s.doRectanglesOverlap(p,c)&&this.die()}}},t.prototype.die=function(){this.dead||(c.submitScore(),this.velocity.x=0,this.velocity.y=0,this.shooting=!1,this.jumping=!1,this.dead=!0)},t.prototype.draw=function(){var t=this.animationPlayer.currentSprite();w(this.position.x,this.position.y,t,this.renderer,this.facingDirection==n.right),this.weapon.draw()},t.prototype.setWeapon=function(t){this.weapon=t,this.weapon.position.x=this.position.x+o.tileSize*this.facingDirection,this.weapon.position.y=this.position.y,this.weapon.direction=this.facingDirection,this.weapon.update(0)},t}();function w(t,e,i,n,r){if(void 0===r&&(r=!1),n.sprite(t,e,i,r),e+i.height>o.worldHeight){var s=e+i.height-o.worldHeight;n.sprite(t,-i.height+s,i,r)}e<0&&n.sprite(t,o.worldHeight-Math.abs(e),i,r)}e.Player=m,e.drawVerticalyWrapped=w;var x={run:new f.Animation(f.AnimationMode.loop,[new g.Frame(.1,u.TextureAtlas.guyRun0),new g.Frame(.1,u.TextureAtlas.guyRun1),new g.Frame(.1,u.TextureAtlas.guyRun2),new g.Frame(.1,u.TextureAtlas.guyRun3)]),idle:new f.Animation(f.AnimationMode.loop,[new g.Frame(.1,u.TextureAtlas.guy0),new g.Frame(.1,u.TextureAtlas.guy1),new g.Frame(.1,u.TextureAtlas.guy2),new g.Frame(.1,u.TextureAtlas.guy3),new g.Frame(.1,u.TextureAtlas.guy4),new g.Frame(.1,u.TextureAtlas.guy5)]),fall:new f.Animation(f.AnimationMode.loop,[new g.Frame(.1,u.TextureAtlas.guyFall0)]),fly:new f.Animation(f.AnimationMode.loop,[new g.Frame(.1,u.TextureAtlas.guyFly0)]),die:new f.Animation(f.AnimationMode.once,[new g.Frame(.1,u.TextureAtlas.guyDie0),new g.Frame(.1,u.TextureAtlas.guyDie1),new g.Frame(.1,u.TextureAtlas.guyDie2)])}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t){this.objectPool=t,this.objects=[]}return t.prototype.get=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=(t=this.objectPool).get.apply(t,e);return this.objects.push(n),n},t.prototype.release=function(){for(;;){var t=this.objects.pop();if(null==t)return;this.objectPool.add(t)}},t}();e.ObjectPoolManager=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){this.newObject=t,this.initializeObject=e,this.objects=[]}return t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.objects.pop();return null==i?this.newObject.apply(this,t):(this.initializeObject.apply(this,[i].concat(t)),i)},t.prototype.add=function(t){this.objects.push(t)},t}();e.ObjectPool=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0);e.findLineIntersection=function(t,e){var i=(e.p1.x-e.p0.x)*(t.p0.y-t.p1.y)-(t.p0.x-t.p1.x)*(e.p1.y-e.p0.y);if(0==i)return null;var o=((e.p0.y-e.p1.y)*(t.p0.x-e.p0.x)+(e.p1.x-e.p0.x)*(t.p0.y-e.p0.y))/i,r=((t.p0.y-t.p1.y)*(t.p0.x-e.p0.x)+(t.p1.x-t.p0.x)*(t.p0.y-e.p0.y))/i;return o>=0&&o<=1&&r>=0&&r<=1?n.tVector2.get(t.p0.x+o*(t.p1.x-t.p0.x),t.p0.y+o*(t.p1.y-t.p0.y)):null}},function(t,e,i){t.exports=i.p+"35d2e3eb50cc0506322689dbc816c3cc.webm"},function(t,e,i){t.exports=i.p+"f12fdc1ba7cec368e9c393fdba4ad536.ogg"},function(t,e,i){t.exports=i.p+"9328809dbbaf919a10db94cf798cb87e.webm"},function(t,e,i){t.exports=i.p+"7dcae19a697a17e78481d8b8b79acc1c.ogg"},function(t,e,i){t.exports=i.p+"70a488ecceae2e4b97d433f85f173f0b.webm"},function(t,e,i){t.exports=i.p+"f0fef1a5a219731a6c0e6228d4127050.ogg"},function(t,e,i){t.exports=i.p+"1fae99bcf6c6f85a9c9d23866e125ba9.webm"},function(t,e,i){t.exports=i.p+"9790cdf68d6f989bf13fbe0e41243336.ogg"},function(t,e,i){t.exports=i.p+"cd5eb444b32efe07160e3ef118d11bc5.webm"},function(t,e,i){t.exports=i.p+"873313eb957a6af71cd2b9416bb94254.ogg"},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0),o=function(){function t(t){this.graphics=t}return t.prototype.image=function(t,e,i,o){t=n.tRectangle.get(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height)),this.graphics.draw(t,e,i,o)},t}();e.GraphicsRenderer=o},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(){this.allowStorageKey="allowStorage",this.allowStorage=!1,this.scoreKey="score",this.score=null,this.allowStorage=null!=window.localStorage.getItem(this.allowStorageKey)}return t.prototype.getScore=function(){if(!this.allowStorage)return 0;if(null==this.score){var t=window.localStorage.getItem(this.scoreKey);if(null==t)return 0;this.score=parseInt(t)}return this.score},t.prototype.saveScore=function(t){this.score=t,this.allowStorage&&window.localStorage.setItem(this.scoreKey,t.toString())},t.prototype.userAllowedStorage=function(){this.allowStorage=!0,window.localStorage.setItem(this.allowStorageKey,"yes"),null!=this.score&&this.saveScore(this.score)},t}();e.Persistence=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(2),o=i(37),r=i(1),s=i(15),a=null,l=n.TextureAtlas.steelSideBar,h=n.TextureAtlas.steelTopBar,u=n.TextureAtlas.steelTopBarRight,c=n.TextureAtlas.steelTopBarLeft,p=n.TextureAtlas.steelBarLeft,d=n.TextureAtlas.steelBarMiddle,f=n.TextureAtlas.steelBarRight,g=n.TextureAtlas.steelBarStandTopLeft,y=n.TextureAtlas.steelBarStandTopRight,m=n.TextureAtlas.steelBarStandBottomLeft,w=n.TextureAtlas.steelBarStandBottomRight,x=n.TextureAtlas.steelSideBarBottom,v=n.TextureAtlas.groundMiddle,R=n.TextureAtlas.groundRight,b=n.TextureAtlas.groundLeft,A=n.TextureAtlas.steelBarStandCenterLeft,S=n.TextureAtlas.steelBarStandCenterRight;function T(t,e,i,n){return new s.Line(new r.Vector2(t,e),new r.Vector2(i,n))}e.level1=new o.Level(new r.Vector2(135,95),[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[l,h,h,h,h,h,u,a,a,a,a,c,h,h,h,h,h,l],[l,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,l],[l,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,l],[l,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,l],[l,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,l],[l,a,a,a,p,d,d,d,d,d,d,d,d,f,a,a,a,l],[l,a,a,a,g,a,a,a,a,a,a,a,a,y,a,a,a,l],[l,a,a,a,m,a,a,a,a,a,a,a,a,w,a,a,a,l],[l,d,d,d,f,a,a,a,a,a,a,a,a,p,d,d,d,l],[l,a,a,a,y,a,a,a,a,a,a,a,a,g,a,a,a,l],[l,a,a,a,S,a,p,d,d,d,d,f,a,A,a,a,a,l],[l,a,a,a,S,a,g,a,a,a,a,y,a,A,a,a,a,l],[l,a,a,a,w,a,m,a,a,a,a,w,a,m,a,a,a,l],[x,v,v,v,v,v,R,a,a,a,a,b,v,v,v,v,v,x]],[T(7,0,7,1),T(7,1,1,1),T(1,0,1,14),T(1,13.35,7,13.35),T(7,13.35,7,14),T(11,14,11,13.35),T(11,13.35,17,13.35),T(17,14,17,0),T(17,1,11,1),T(17,1,11,1),T(11,1,11,0),T(4,5.35,14,5.35),T(1,8.35,5,8.35),T(13,8.35,17,8.35),T(6,10.35,12,10.35)])},function(t,e,i){"use strict";e.__esModule=!0;var n=i(3),o=function(){return function(t,e,i,o){this.playerStartLocation=t,this.spawnBasketLocations=e,this.map=i,this.collisionLines=o;for(var r=0,s=this.collisionLines;r<s.length;r++){var a=s[r];a.p0.set(a.p0.x*n.tileSize,a.p0.y*n.tileSize),a.p1.set(a.p1.x*n.tileSize,a.p1.y*n.tileSize)}}}();e.Level=o},function(t,e,i){"use strict";e.__esModule=!0;var n,o=i(3),r=i(2);!function(t){t[t.left=0]="left",t[t.rigth=1]="rigth",t[t.jump=2]="jump",t[t.shoot=3]="shoot"}(n||(n={}));var s=function(){return function(t,e){this.pointerId=t,this.button=e}}(),a=function(){function t(t,e,i,n){var a=this;this.controller=t,this.scaleRenderer=i,this.translationRenderer=n,this.buttons=[r.TextureAtlas.buttonJump,r.TextureAtlas.buttonShoot,r.TextureAtlas.buttonLeft,r.TextureAtlas.buttonRight],this.pointerStates=[],this.buttonWidth=o.worldWidth/this.buttons.length,e.addEventListener("pointerdown",function(t){var e=a.toWorldCoordinate(t.x),i=a.getButton(e);if(null!=i){a.press(i),a.pointerStates=a.pointerStates.filter(function(e){return e.pointerId!=t.pointerId});var n=new s(t.pointerId,i);a.pointerStates.push(n)}}),e.addEventListener("pointerup",function(t){var e=a.pointerStates.find(function(e){return e.pointerId==t.pointerId});if(e){a.release(e.button);var i=a.pointerStates.indexOf(e);-1!=i&&a.pointerStates.splice(i,1)}}),e.addEventListener("pointermove",function(t){var e=a.pointerStates.find(function(e){return e.pointerId==t.pointerId});if(e){var i=a.toWorldCoordinate(t.x),n=a.getButton(i);null!=n&&(e.button,a.release(e.button),a.press(n),e.button=n)}})}return t.prototype.release=function(t){t==n.jump?this.controller.releaseActionButton1():t==n.shoot?this.controller.releaseActionButton2():t==n.left?this.controller.releaseLeft():t==n.rigth&&this.controller.releaseRight()},t.prototype.press=function(t){t==n.jump?this.controller.pressActionButton1():t==n.shoot?this.controller.pressActionButton2():t==n.left?this.controller.pressLeft():t==n.rigth&&this.controller.pressRight()},t.prototype.toWorldCoordinate=function(t){return t-=this.translationRenderer.xOffset,t/=this.scaleRenderer.scale},t.prototype.isJumpButton=function(t){return t<this.buttonWidth},t.prototype.isShootButton=function(t){return t>=this.buttonWidth&&t<2*this.buttonWidth},t.prototype.isLeftButton=function(t){return t>=2*this.buttonWidth&&t<3*this.buttonWidth},t.prototype.isRightButton=function(t){return t>=2*this.buttonWidth},t.prototype.getButton=function(t){return this.isJumpButton(t)?n.jump:this.isShootButton(t)?n.shoot:this.isLeftButton(t)?n.left:this.isRightButton(t)?n.rigth:null},t.prototype.draw=function(t){for(var e=o.worldWidth/this.buttons.length,i=0;i<this.buttons.length;i++){var n=this.buttons[i],r=i*e+e/2-n.width/2;t.sprite(r,o.worldHeight-n.height-o.tileSize/4,n)}},t}();e.PointerController=a},function(t,e,i){"use strict";e.__esModule=!0;var n="\nattribute vec2 position;\nattribute vec2 texturePosition;\nvarying vec2 texturePositionF;\n\nvoid main() {\n    gl_Position = vec4(position.x, position.y, 0, 1);\n    texturePositionF = texturePosition;\n}\n",o="\nprecision mediump float;\nuniform sampler2D textureSampler;\nvarying vec2 texturePositionF;\n\nvoid main() {\n    vec4 color = texture2D(textureSampler, texturePositionF);\n    gl_FragColor = color;\n}\n",r=4,s=function(){function t(t){this.imageToWebGLTexture=new Map,this.buffer=new Float32Array(72e3),this.bufferIndex=0;var e=t.getContext("webgl",{alpha:!1,antialias:!1,powerPreference:"high-performance",stencil:!1,preserveDrawingBuffer:!1});if(null==e)throw new Error("Could not get webGL context");this.gl=e,e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);var i=function(t,e){var i=e.createProgram();if(!i)throw new Error("Could not create program");for(var n=0,o=t;n<o.length;n++){var r=o[n];e.attachShader(i,r)}if(e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){var s=e.getProgramInfoLog(i)||"";throw new Error(s)}return i}([a(n,e.VERTEX_SHADER,e),a(o,e.FRAGMENT_SHADER,e)],e);e.useProgram(i),this.gl.bindBuffer(e.ARRAY_BUFFER,e.createBuffer());var s=2*r,l=2*r,h=s+l,u=0,c=e.getAttribLocation(i,"position");e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,h,u),u+=s;var p=e.getAttribLocation(i,"texturePosition");e.enableVertexAttribArray(p),e.vertexAttribPointer(p,2,e.FLOAT,!1,h,u),u+=l}return t.prototype.clear=function(t,e,i){this.gl.clearColor(t/255,e/255,i/255,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},t.prototype.present=function(){this.bufferIndex>0&&(this.gl.bufferData(this.gl.ARRAY_BUFFER,this.buffer.subarray(0,this.bufferIndex),this.gl.DYNAMIC_DRAW),this.gl.drawArrays(this.gl.TRIANGLES,0,this.bufferIndex/4)),this.bufferIndex=0},t.prototype.getTexture=function(t){var e=this.imageToWebGLTexture.get(t);if(null!=e)return e;var i=this.createTexture(t);return i&&this.imageToWebGLTexture.set(t,i),i},t.prototype.draw=function(t,e,i,n){if(!(this.bufferIndex+24>=this.buffer.length)){var o=this.getTexture(i);if(o){n&&(e.x+=e.width,e.width*=-1),this.gl.bindTexture(this.gl.TEXTURE_2D,o);var r=t.x,s=t.width,a=t.y,l=t.height;r=2*r/this.gl.canvas.width-1,s=s/this.gl.canvas.width*2,a=-2*a/this.gl.canvas.height+1,l=-l/this.gl.canvas.height*2,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);var h=e.x/i.width,u=h+e.width/i.width,c=e.y/i.height,p=c+e.height/i.height;this.buffer[this.bufferIndex++]=r,this.buffer[this.bufferIndex++]=a,this.buffer[this.bufferIndex++]=h,this.buffer[this.bufferIndex++]=c,this.buffer[this.bufferIndex++]=r+s,this.buffer[this.bufferIndex++]=a+l,this.buffer[this.bufferIndex++]=u,this.buffer[this.bufferIndex++]=p,this.buffer[this.bufferIndex++]=r,this.buffer[this.bufferIndex++]=a+l,this.buffer[this.bufferIndex++]=h,this.buffer[this.bufferIndex++]=p,this.buffer[this.bufferIndex++]=r,this.buffer[this.bufferIndex++]=a,this.buffer[this.bufferIndex++]=h,this.buffer[this.bufferIndex++]=c,this.buffer[this.bufferIndex++]=r+s,this.buffer[this.bufferIndex++]=a+l,this.buffer[this.bufferIndex++]=u,this.buffer[this.bufferIndex++]=p,this.buffer[this.bufferIndex++]=r+s,this.buffer[this.bufferIndex++]=a,this.buffer[this.bufferIndex++]=u,this.buffer[this.bufferIndex++]=c}}},t.prototype.createTexture=function(t){if(!t.complete)return null;var e=this.gl,i=e.createTexture();if(null==i)return null;e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);var n=e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n);var o=e.NEAREST;return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,o),i},t}();function a(t,e,i){var n=i.createShader(e);if(!n)throw new Error("Could not create shader");if(i.shaderSource(n,t),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS)){var o=i.getShaderInfoLog(n)||"";throw new Error(o)}return n}e.GraphicsWebGL=s},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t){this.controller=t,this.buttonIndexLeft=14,this.buttonIndexRight=15,this.buttonIndexJump=0,this.buttonIndexShoot=2,this.horizontalAxisIndex=0,this.lastHorizontalAxisValue=0,this.axisTreshold=.5,this.leftIsPressed=!1,this.rightIsPressed=!1,this.jumpIsPressed=!1,this.shootIsPressed=!1,this.update()}return t.prototype.update=function(){var t=this;requestAnimationFrame(function(){return t.update()});var e=function(){for(var t=0,e=navigator.getGamepads();t<e.length;t++){var i=e[t];if(i)return i}return null}();e&&(this.updateButtons(e),this.updateAxis(e))},t.prototype.updateButtons=function(t){var e=o(this.buttonIndexLeft,t);this.leftIsPressed!==e&&(e?this.controller.pressLeft():this.controller.releaseLeft());var i=o(this.buttonIndexRight,t);this.rightIsPressed!==i&&(i?this.controller.pressRight():this.controller.releaseRight());var n=o(this.buttonIndexShoot,t);this.shootIsPressed!==n&&(n?this.controller.pressActionButton2():this.controller.releaseActionButton2());var r=o(this.buttonIndexJump,t);this.jumpIsPressed!==r&&(r?this.controller.pressActionButton1():this.controller.releaseActionButton1()),this.leftIsPressed=e,this.rightIsPressed=i,this.jumpIsPressed=r,this.shootIsPressed=n},t.prototype.updateAxis=function(t){var e=t.axes[this.horizontalAxisIndex]||0;e<-this.axisTreshold?(1==this.lastHorizontalAxisValue&&this.controller.releaseRight(),-1!=this.lastHorizontalAxisValue&&(this.lastHorizontalAxisValue=-1,this.controller.pressLeft())):e>this.axisTreshold?(-1==this.lastHorizontalAxisValue&&this.controller.releaseLeft(),1!=this.lastHorizontalAxisValue&&(this.lastHorizontalAxisValue=1,this.controller.pressRight())):(-1==this.lastHorizontalAxisValue&&this.controller.releaseLeft(),1==this.lastHorizontalAxisValue&&this.controller.releaseRight(),this.lastHorizontalAxisValue=0)},t}();function o(t,e){return!(t>=e.buttons.length)&&e.buttons[t].pressed}e.GamepadController=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(){this.x=0,this.y=0,this.trauma=0,this.shakeTime=0,this.timeSinceAddedTrauma=0,this.shakeInterval=.03}return t.prototype.addTrauma=function(t){this.trauma+=t,this.trauma>1&&(this.trauma=1),this.timeSinceAddedTrauma=0},t.prototype.getTrauma=function(){return this.trauma},t.prototype.update=function(t){if(this.shakeTime+=this.shakeInterval,this.shakeTime>=this.shakeInterval){this.shakeTime=0,this.trauma>=1&&(this.trauma=1);var e=Math.pow(this.trauma,2);this.x=2*Math.random()*e,this.y=2*Math.random()*e,this.x-=1,this.y-=1,this.timeSinceAddedTrauma+=t,this.trauma-=.4*this.timeSinceAddedTrauma,this.trauma<0&&(this.trauma=0)}},t}();e.ScreenShaker=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(2),o=i(1),r=i(43),s=i(4),a=i(3),l=i(0),h=function(){return function(t,e){this.weapon=t,this.position=e,this.sprite=n.TextureAtlas.basket}}();e.Basket=h;var u=function(){function t(t,e){this.playerEntity=e,this.spawnLocations=[];for(var i=0;i<t.spawnBasketLocations.length;i++)for(var n=0;n<t.spawnBasketLocations[i].length;n++)1==t.spawnBasketLocations[i][n]&&this.spawnLocations.push(new o.Vector2(n*a.tileSize,i*a.tileSize))}return t.prototype.randomLocation=function(){var t=l.tRectangle.get(this.playerEntity.position.x-a.tileSize,this.playerEntity.position.y-a.tileSize,3*a.tileSize,3*a.tileSize),e=this.spawnLocations.filter(function(e){return!s.doRectanglesOverlap(t,l.tRectangle.get(e.x,e.y,a.tileSize,a.tileSize))});return e[Math.floor(Math.random()*e.length)]},t}();e.BasketPlacer=u;var c=function(){function t(t){this.index=0,this.weapons=Array.from(t),this.currentWeapon=this.weapons[0],r.shuffle(this.weapons)}return t.prototype.nextWeapon=function(){var t=this.weapons[this.index++];return this.index>=this.weapons.length&&(r.shuffle(this.weapons),this.index=0),this.currentWeapon==t&&(t=this.nextWeapon()),this.currentWeapon=t,t},t}();e.WeaponPicker=c},function(t,e,i){"use strict";function n(t){for(var e=0;e<t.length-1;e++){var i=t[e],n=e+1+Math.floor(Math.random()*(t.length-e-1));t[e]=t[n],t[n]=i}}e.__esModule=!0,e.shuffled=function(t){var e=t.slice();return n(e),e},e.shuffle=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t){var e=t.getContext("2d",{alpha:!1});if(null==e)throw new Error("Could not get 2d context");this.context=e,this.context.imageSmoothingEnabled=!1}return t.prototype.draw=function(t,e,i,n){var o=t.x,r=t.width;n&&(this.context.scale(-1,1),o*=-1,r*=-1),this.context.drawImage(i,e.x,e.y,e.width,e.height,o,t.y,r,t.height),n&&this.context.scale(-1,1)},t.prototype.clear=function(t,e,i){this.context.fillStyle="rgb("+t+", "+e+", "+i+")",this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height)},t.prototype.present=function(){},t}();e.GraphicsContext2D=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){return function(t){var e="CookieNotice",i=document.createElement("style");i.innerHTML="\n    #"+e+" {\n      font-family: sans-serif;\n      position: absolute;\n      bottom: 20px;\n      width: 100%;\n      max-width: 800px;\n      background-color: #ffffff;\n      box-shadow: 0 1px 2px 1px black;\n      text-align: center;\n      padding: 10px;\n      box-sizing: border-box;\n      left: 50%;\n      transform: translateX(-50%);\n      border-radius: 5px;\n    }\n\n    #text {\n      font-size: 1.3rem;\n      line-height: 2rem;\n    }\n\n    #"+e+" .Button {\n      box-shadow: 0 1px 2px -1px black; \n      font-size: 2rem;\n      color: white;\n      text-shadow: 0 2px 2px black;\n      border-style: none;\n      border-radius: 5px;\n      flex: 1;\n      margin-left: 1rem;\n    }\n\n    #"+e+" Button:first-child {\n      margin-right: 1rem;\n      margin-left: 0;\n    }\n\n    #"+e+" Button:hover {\n      cursor: pointer;\n    }\n\n    #accept {\n      background-color: #6abe30;\n    }\n    \n    #decline {\n      background-color: #ac3232;\n    }\n\n    .row {\n      padding-top: 20px;\n      display: flex;\n    }\n\n    ",document.body.appendChild(i);var n=document.createRange().createContextualFragment('\n    <div id="'+e+'">\n      <div class="padding">\n        <h1>Allow cookies?</h1>\n        <div id="text">\n          Accepting cookies will store <i>allowedStorage</i> and <i>highscore</i>\n          in your browser. <i>allowedStorage</i> will prevent this message from\n          reappearing and <i>highscore</i> will store your highscore.\n        </div>\n        <div class="row">\n          <button id="accept" class="Button">Yes</button>\n          <button id="decline" class="Button">No</button>\n        </div>\n      </div>\n    </div>\n    ');document.body.appendChild(n);var o=document.getElementById(e),r=document.getElementById("accept"),s=document.getElementById("decline");o&&r&&s&&(r.addEventListener("click",function(){document.body.removeChild(o),t()}),s.addEventListener("click",function(){document.body.removeChild(o),document.body.removeChild(i)}))}}();e.CookieNotice=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0),o=function(){function t(t,e){this.renderer=t,this.texture=e}return t.prototype.sprite=function(t,e,i,o){void 0===o&&(o=!1);var r=n.tRectangle.get(t,e,i.width,i.height);this.renderer.image(r,i,this.texture,o)},t.prototype.sprite2=function(t,e){this.renderer.image(t,e,this.texture,!1)},t}();e.SpriteRenderer=o},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t){this.player=t}return t.prototype.pressLeft=function(){this.player.startLeft()},t.prototype.releaseLeft=function(){this.player.stopLeft()},t.prototype.pressRight=function(){this.player.startRight()},t.prototype.releaseRight=function(){this.player.stopRight()},t.prototype.pressActionButton1=function(){this.player.startJump()},t.prototype.releaseActionButton1=function(){this.player.stopJump()},t.prototype.pressActionButton2=function(){this.player.startShoot()},t.prototype.releaseActionButton2=function(){this.player.stopShoot()},t}();e.PlayerController=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(){this.events=[]}return t.prototype.update=function(t){this.events=this.events.filter(function(e){return e.timeBeforeCall-=t,!(e.timeBeforeCall<=0)||(e.func(),!1)})},t.prototype.register=function(t,e){for(var i=new o(t,e),n=0;n<this.events.length;n++)if(t<this.events[n].timeBeforeCall)return void this.events.splice(n,0,i);this.events.push(i)},t}();e.EventSystem=n;var o=function(){return function(t,e){this.timeBeforeCall=t,this.func=e}}()},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(){this.bullets=[],this.bulletsToRemove=[]}return t.prototype.add=function(t){this.bullets.push(t)},t.prototype.update=function(t){for(var e=0,i=this.bullets;e<i.length;e++){i[e].update(t)}this.removeBulletsToRemove()},t.prototype.draw=function(){for(var t=0,e=this.bullets;t<e.length;t++){e[t].draw()}},t.prototype.remove=function(t){this.bulletsToRemove.push(t)},t.prototype.removeBulletsToRemove=function(){for(var t=0,e=this.bulletsToRemove;t<e.length;t++){var i=e[t],n=this.bullets.indexOf(i);n>=0&&this.bullets.splice(n,1)}this.bulletsToRemove=[]},t}();e.BulletSystem=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(51),o=i(52),r=i(53),s=function(){function t(t,e,i){this.enemies=t,this.spriteRenderer=e,this.level=i,this.maxEnemies=20,this.timeSinceSpawn=0,this.delay=1}return t.prototype.update=function(t){if(this.timeSinceSpawn+=t,this.enemies.length<this.maxEnemies&&this.timeSinceSpawn>this.delay){var e=this.randomEnemy();e.position.x=90+20*Math.random(),e.position.y=-20,e.direction=Math.random()<.5?-1:1,this.enemies.push(e),this.timeSinceSpawn=0,this.delay=.5+Math.random()}},t.prototype.randomEnemy=function(){var t=Math.floor(3*Math.random());return 0==t?new n.Blueberry(this.spriteRenderer,this.level):1==t?new o.Lemon(this.spriteRenderer,this.level):new r.WaterMelon(this.spriteRenderer,this.level)},t}();e.EnemySpawner=s},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(5),r=i(3),s=i(13),a=i(2),l=i(14),h=i(11),u=i(8),c=i(12),p=i(0),d=i(4),f=function(){function t(t,e){this.spriteRenderer=t,this.level=e,this.health=1,this.position=new n.Vector2,this.velocity=new n.Vector2,this.direction=-1,this.run=g.run,this.fall=g.fall,this.animationPlayer=new h.AnimationPlayer(this.run)}return t.prototype.getHitBy=function(t,e){if(this.health-=e,!(this.health>0)){o.removeEnemy(this);for(var i=this.direction>0,n=0,r=[new l.FlyingPart(this.spriteRenderer,a.TextureAtlas.blueberryPart0,i),new l.FlyingPart(this.spriteRenderer,a.TextureAtlas.blueberryPart1,i)];n<r.length;n++){var s=r[n];s.position.x=this.position.x,s.position.y=this.position.y,o.addEnemy(s)}}},t.prototype.getBoundingRectangle=function(){var t=this.animationPlayer.currentSprite();return p.tRectangle.get(this.position.x+5,this.position.y+5,t.width-8,t.height-9)},t.prototype.update=function(t){this.animationPlayer.update(t);var e=p.tVector2.get(this.position.x,this.position.y);this.velocity.y+=550*t,this.position.y+=this.velocity.y*t,this.position.x+=this.velocity.x*t;for(var i=this.animationPlayer.currentSprite().width,n=this.animationPlayer.currentSprite().height,o=0,s=this.level.collisionLines;o<s.length;o++){var a=s[o],l=d.resolveCollision(e,this.position,i,n,a);l&&(l.y<this.position.y&&(this.velocity.y=0),l.x<this.position.x?(this.velocity.x=0,this.direction=-1):l.x>this.position.x&&(this.velocity.x=0,this.direction=1),this.position.set(l.x,l.y))}0==this.velocity.y&&(this.velocity.x+=2*this.direction),this.position.y>r.worldHeight&&(this.position.y=0),0==this.velocity.y&&h.switchAnimation(this.run,this.animationPlayer),this.velocity.y>0&&h.switchAnimation(this.fall,this.animationPlayer)},t.prototype.draw=function(){var t=this.animationPlayer.currentSprite();s.drawWrappedAroundBottom(this.position.x,this.position.y,t,this.spriteRenderer,this.direction>0)},t}();e.Blueberry=f;var g={run:new u.Animation(u.AnimationMode.loop,[new c.Frame(.1,a.TextureAtlas.blueberryRun0),new c.Frame(.1,a.TextureAtlas.blueberryRun1),new c.Frame(.1,a.TextureAtlas.blueberryRun2),new c.Frame(.1,a.TextureAtlas.blueberryRun3),new c.Frame(.1,a.TextureAtlas.blueberryRun4),new c.Frame(.1,a.TextureAtlas.blueberryRun5)]),fall:new u.Animation(u.AnimationMode.loop,[new c.Frame(.1,a.TextureAtlas.blueberryRun0),new c.Frame(.1,a.TextureAtlas.blueberryRun1)])}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(5),r=i(3),s=i(13),a=i(14),l=i(2),h=i(11),u=i(8),c=i(12),p=i(0),d=i(4),f=function(){function t(t,e){this.spriteRenderer=t,this.level=e,this.health=5,this.run=g.run,this.animationPlayer=new h.AnimationPlayer(this.run),this.position=new n.Vector2,this.velocity=new n.Vector2,this.direction=-1}return t.prototype.getHitBy=function(t,e){if(this.health-=e,!(this.health>0)){o.removeEnemy(this);for(var i=this.direction>0,n=0,r=[new a.FlyingPart(this.spriteRenderer,l.TextureAtlas.lemonPart0,i),new a.FlyingPart(this.spriteRenderer,l.TextureAtlas.lemonPart1,i)];n<r.length;n++){var s=r[n];s.position.x=this.position.x,s.position.y=this.position.y,o.addEnemy(s)}}},t.prototype.getBoundingRectangle=function(){var t=this.animationPlayer.currentSprite();return p.tRectangle.get(this.position.x+4,this.position.y+3,t.width-4,t.height-7)},t.prototype.update=function(t){this.animationPlayer.update(t);var e=new n.Vector2(this.position.x,this.position.y);this.velocity.y+=550*t,this.position.y+=this.velocity.y*t,this.position.x+=this.velocity.x*t;for(var i=this.animationPlayer.currentSprite().width,o=this.animationPlayer.currentSprite().height,s=0,a=this.level.collisionLines;s<a.length;s++){var l=a[s],h=d.resolveCollision(e,this.position,i,o,l);h&&(h.y<this.position.y&&(this.velocity.y=0),h.x<this.position.x?(this.velocity.x=0,this.direction=-1):h.x>this.position.x&&(this.velocity.x=0,this.direction=1),this.position.set(h.x,h.y))}0==this.velocity.y&&(this.velocity.x+=1.5*this.direction),this.position.y>r.worldHeight&&(this.position.y=0)},t.prototype.draw=function(){var t=this.animationPlayer.currentSprite();s.drawWrappedAroundBottom(this.position.x,this.position.y,t,this.spriteRenderer,this.direction>0)},t}();e.Lemon=f;var g={run:new u.Animation(u.AnimationMode.loop,[new c.Frame(.1,l.TextureAtlas.lemonRun0),new c.Frame(.1,l.TextureAtlas.lemonRun1),new c.Frame(.1,l.TextureAtlas.lemonRun2),new c.Frame(.1,l.TextureAtlas.lemonRun3),new c.Frame(.1,l.TextureAtlas.lemonRun4),new c.Frame(.1,l.TextureAtlas.lemonRun5)]),fall:new u.Animation(u.AnimationMode.loop,[new c.Frame(.1,l.TextureAtlas.lemonFall0),new c.Frame(.1,l.TextureAtlas.lemonFall1)])}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(5),r=i(3),s=i(13),a=i(14),l=i(2),h=i(11),u=i(8),c=i(12),p=i(0),d=i(4),f=function(){function t(t,e){this.spriteRenderer=t,this.level=e,this.health=5,this.animationPlayer=new h.AnimationPlayer(g.run),this.velocity=new n.Vector2,this.position=new n.Vector2,this.direction=-1}return t.prototype.getHitBy=function(t,e){if(this.health-=e,!(this.health>0)){o.removeEnemy(this);for(var i=this.direction>0,n=0,r=[new a.FlyingPart(this.spriteRenderer,l.TextureAtlas.melonPart0,i),new a.FlyingPart(this.spriteRenderer,l.TextureAtlas.melonPart1,i),new a.FlyingPart(this.spriteRenderer,l.TextureAtlas.melonPart2,i)];n<r.length;n++){var s=r[n];s.position.set(this.position.x,this.position.y),o.addEnemy(s)}}},t.prototype.update=function(t){this.animationPlayer.update(t);var e=p.tVector2.get(this.position.x,this.position.y);this.velocity.y+=550*t,this.position.y+=this.velocity.y*t,this.position.x+=this.velocity.x*t;for(var i=this.animationPlayer.currentSprite().width,n=this.animationPlayer.currentSprite().height,o=0,s=this.level.collisionLines;o<s.length;o++){var a=s[o],l=d.resolveCollision(e,this.position,i,n,a);l&&(l.y<this.position.y&&(this.velocity.y=0),l.x<this.position.x?(this.velocity.x=0,this.direction=-1):l.x>this.position.x&&(this.velocity.x=0,this.direction=1),this.position.set(l.x,l.y))}0==this.velocity.y&&(this.velocity.x+=1*this.direction),this.position.y>r.worldHeight&&(this.position.y=0)},t.prototype.getBoundingRectangle=function(){var t=this.animationPlayer.currentSprite();return p.tRectangle.get(this.position.x+10,this.position.y+7,t.width-14,t.height-11)},t.prototype.draw=function(){var t=this.animationPlayer.currentSprite();s.drawWrappedAroundBottom(this.position.x,this.position.y,t,this.spriteRenderer,this.direction>0)},t}();e.WaterMelon=f;var g={run:new u.Animation(u.AnimationMode.loop,[new c.Frame(.1,l.TextureAtlas.melonRun0),new c.Frame(.1,l.TextureAtlas.melonRun1),new c.Frame(.1,l.TextureAtlas.melonRun2),new c.Frame(.1,l.TextureAtlas.melonRun3),new c.Frame(.1,l.TextureAtlas.melonRun4),new c.Frame(.1,l.TextureAtlas.melonRun5)]),fall:new u.Animation(u.AnimationMode.loop,[])}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(3),r=i(4),s=i(2),a=i(11),l=i(8),h=i(12),u=i(0),c=function(){function t(t,e){this.spriteRenderer=t,this.enemies=e,this.position=new n.Vector2,this.reloadTime=0,this.direction=-1,this.timeSinceLastUse=10,this.animationPlayer=new a.AnimationPlayer(p.useKnife)}return t.prototype.use=function(){if(this.timeSinceLastUse=0,this.reloadTime<=0){this.reloadTime=0;for(var t=0,e=this.enemies;t<e.length;t++){var i=e[t],n=i.getBoundingRectangle(),s=u.tRectangle.get(this.position.x,this.position.y,o.tileSize,o.tileSize);n&&r.doRectanglesOverlap(s,n)&&i.getHitBy(this.position,5)}}},t.prototype.draw=function(){var t=this.timeSinceLastUse<.05,e=s.TextureAtlas.knife;t&&(e=this.animationPlayer.currentSprite()),this.spriteRenderer.sprite(this.position.x,this.position.y,e,this.direction<0)},t.prototype.update=function(t){this.timeSinceLastUse+=t,this.reloadTime-=t,this.animationPlayer.update(t)},t}();e.Knife=c;var p={useKnife:new l.Animation(l.AnimationMode.loop,[new h.Frame(.1,s.TextureAtlas.knifeUse0),new h.Frame(.1,s.TextureAtlas.knifeUse1)])}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(2),r=i(3),s=i(4),a=i(10),l=i(0),h=function(){function t(t,e,i,o){this.spriteRenderer=t,this.bulletSystem=e,this.enemies=i,this.audioSystem=o,this.position=new n.Vector2,this.reloadTime=0,this.direction=-1,this.timeSinceLastUse=1/0,this.update(0),this.sound=this.audioSystem.load(a.usePistol)}return t.prototype.use=function(){if(this.reloadTime<=0){this.audioSystem.play(this.sound),this.reloadTime=.3;var t=new u(this.spriteRenderer,this.bulletSystem,this.enemies);t.position.x=this.position.x,t.position.y=this.position.y+6,t.velocity.x=260*this.direction,this.bulletSystem.add(t),this.timeSinceLastUse=0}},t.prototype.draw=function(){if(this.timeSinceLastUse<.1){var t=this.position.x;this.direction>0&&(t+=13),this.spriteRenderer.sprite(t,this.position.y+5,o.TextureAtlas.flare0,this.direction<0)}this.spriteRenderer.sprite(this.position.x,this.position.y,o.TextureAtlas.pistol,this.direction<0)},t.prototype.update=function(t){this.timeSinceLastUse+=t,this.reloadTime-=t},t}();e.Pistol=h;var u=function(){function t(t,e,i){this.spriteRenderer=t,this.bulletSystem=e,this.enemies=i,this.position=new n.Vector2,this.velocity=new n.Vector2,this.sprite=o.TextureAtlas.pistolBullet}return t.prototype.update=function(t){if(this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.x+this.sprite.width<0||this.position.x>r.worldWidth)this.bulletSystem.remove(this);else for(var e=0,i=this.enemies;e<i.length;e++){var n=i[e],o=n.getBoundingRectangle();if(null!=o){var a=l.tRectangle.get(this.position.x,this.position.y,this.sprite.width,this.sprite.height);if(s.doRectanglesOverlap(o,a))return this.bulletSystem.remove(this),void n.getHitBy(this.position,5)}}},t.prototype.draw=function(){this.spriteRenderer.sprite(this.position.x,this.position.y,this.sprite,this.velocity.x<0)},t}();e.PistolBullet=u},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(2),r=i(3),s=i(4),a=i(10),l=i(0),h=function(){function t(t,e,i,o,r){this.spriteRenderer=t,this.bulletSystem=e,this.screenShaker=i,this.enemies=o,this.audioSystem=r,this.position=new n.Vector2,this.reloadTime=0,this.direction=-1,this.timeSinceLastUse=1/0,this.shootSound=this.audioSystem.load(a.useMachineGun),this.update(0)}return t.prototype.use=function(){if(this.reloadTime<=0){this.reloadTime=.08,this.audioSystem.play(this.shootSound);var t=new u(this.spriteRenderer,this.bulletSystem,this.enemies);t.position.x=this.position.x,t.position.y=this.position.y+6,t.velocity.x=260*this.direction,t.velocity.y=140*Math.random()-70,this.bulletSystem.add(t),this.screenShaker.getTrauma()<.3&&this.screenShaker.addTrauma(.3),this.screenShaker.addTrauma(.1),this.timeSinceLastUse=0}},t.prototype.draw=function(){if(this.timeSinceLastUse<.045){var t=this.position.x;this.direction>0&&(t+=13),this.spriteRenderer.sprite(t,this.position.y+4,o.TextureAtlas.flare1,this.direction<0)}this.spriteRenderer.sprite(this.position.x,this.position.y,o.TextureAtlas.machineGun,this.direction<0)},t.prototype.update=function(t){this.timeSinceLastUse+=t,this.reloadTime-=t},t}();e.MachineGun=h;var u=function(){function t(t,e,i){this.spriteRenderer=t,this.bulletSystem=e,this.enemies=i,this.sprite=o.TextureAtlas.machineGunBullet,this.position=new n.Vector2,this.velocity=new n.Vector2}return t.prototype.update=function(t){if(this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.x+this.sprite.width<0||this.position.x>r.worldWidth)this.bulletSystem.remove(this);else for(var e=0,i=this.enemies;e<i.length;e++){var n=i[e],o=n.getBoundingRectangle();if(null!=o){var a=l.tRectangle.get(this.position.x,this.position.y,this.sprite.width,this.sprite.height);if(s.doRectanglesOverlap(o,a))return n.getHitBy(this.position,5),void this.bulletSystem.remove(this)}}},t.prototype.draw=function(){this.spriteRenderer.sprite(this.position.x,this.position.y,this.sprite)},t}();e.MachineGunBullet=u},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),o=i(10),r=i(2),s=i(3),a=i(4),l=i(0),h=function(){function t(t,e,i,r,s){this.spriteRenderer=t,this.bulletSystem=e,this.screenShaker=i,this.enemies=r,this.audioSystem=s,this.position=new n.Vector2,this.reloadTime=0,this.direction=-1,this.timeSinceLastUse=1/0,this.update(0),this.sound=this.audioSystem.load(o.useHandCannon)}return t.prototype.use=function(){if(this.reloadTime<=0){this.reloadTime=.8;var t=new u(this.spriteRenderer,this.bulletSystem,this.enemies);t.position.x=this.position.x,t.position.y=this.position.y+3,t.velocity.x=260*this.direction,this.bulletSystem.add(t),this.screenShaker.getTrauma()<.5&&this.screenShaker.addTrauma(.5),this.screenShaker.addTrauma(.2),this.audioSystem.play(this.sound),this.timeSinceLastUse=0}},t.prototype.draw=function(){if(this.timeSinceLastUse<.15){var t=this.position.x-2;this.direction>0&&(t+=17),this.spriteRenderer.sprite(t,this.position.y+3,r.TextureAtlas.flare2,this.direction<0)}this.spriteRenderer.sprite(this.position.x,this.position.y,r.TextureAtlas.handCannon,this.direction<0)},t.prototype.update=function(t){this.timeSinceLastUse+=t,this.reloadTime-=t},t}();e.HandCannon=h;var u=function(){function t(t,e,i){this.spriteRenderer=t,this.bulletSystem=e,this.enemies=i,this.sprite=r.TextureAtlas.handCannonBullet,this.position=new n.Vector2,this.velocity=new n.Vector2,this.entitiesHit=[]}return t.prototype.update=function(t){if(this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.x+this.sprite.width<0||this.position.x>s.worldWidth)this.bulletSystem.remove(this);else for(var e=0,i=this.enemies;e<i.length;e++){var n=i[e],o=n.getBoundingRectangle();if(null!=o&&!this.entitiesHit.includes(n)){var r=l.tRectangle.get(this.position.x,this.position.y,this.sprite.width,this.sprite.height);a.doRectanglesOverlap(o,r)&&(n.getHitBy(this.position,5),this.entitiesHit.push(n))}}},t.prototype.draw=function(){this.spriteRenderer.sprite(this.position.x,this.position.y,this.sprite,this.velocity.x<0)},t}();e.HandCannonBullet=u},function(t,e,i){"use strict";e.__esModule=!0;var n=i(2),o=1,r={a:n.TextureAtlas.a,b:n.TextureAtlas.b,c:n.TextureAtlas.c,d:n.TextureAtlas.d,e:n.TextureAtlas.e,f:n.TextureAtlas.f,g:n.TextureAtlas.g,h:n.TextureAtlas.h,i:n.TextureAtlas.i,j:n.TextureAtlas.j,k:n.TextureAtlas.k,l:n.TextureAtlas.l,m:n.TextureAtlas.m,n:n.TextureAtlas.n,o:n.TextureAtlas.o,p:n.TextureAtlas.p,q:n.TextureAtlas.q,r:n.TextureAtlas.r,s:n.TextureAtlas.s,t:n.TextureAtlas.t,u:n.TextureAtlas.u,v:n.TextureAtlas.v,w:n.TextureAtlas.w,x:n.TextureAtlas.x,y:n.TextureAtlas.y,z:n.TextureAtlas.z,0:n.TextureAtlas[0],1:n.TextureAtlas[1],2:n.TextureAtlas[2],3:n.TextureAtlas[3],4:n.TextureAtlas[5],5:n.TextureAtlas[5],6:n.TextureAtlas[6],7:n.TextureAtlas[7],8:n.TextureAtlas[8],9:n.TextureAtlas[9]},s=4;e.drawText=function(t,e,i,n){i=i.toLowerCase();for(var a=0;a<i.length;a++){var l=i[a];if(" "==l)t+=s;else{var h=r[l];h&&(n.sprite(t,e,h),t+=h.width+o)}}},e.measureTextWidth=function(t){t=t.toLowerCase();for(var e=0,i=0;i<t.length;i++){var n=t[i];if(" "==n)e+=s;else{var a=r[n];a&&(e+=a.width+o)}}return t.length>0&&(e-=o),e}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){return function(t,e,i,n,o,r,s,a,l){this.topLeft=t,this.topCenter=e,this.topRight=i,this.middleLeft=n,this.middleCenter=o,this.middleRight=r,this.bottomLeft=s,this.bottomCenter=a,this.bottomRight=l}}();e.NinePatch=n},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0);e.drawNinePatch=function(t,e,i){var o=t.width-e.topLeft.width-e.topRight.width,r=t.height-e.topLeft.height-e.bottomLeft.height,s=t.x,a=t.y,l=n.tRectangle.get(s,a,e.topLeft.width,e.topLeft.height);s+=l.width;var h=n.tRectangle.get(s,a,o,l.height);s+=h.width;var u=n.tRectangle.get(s,a,e.topRight.width,e.topRight.height);s=t.x,a+=l.height;var c=n.tRectangle.get(s,a,e.middleLeft.width,r);s+=c.width;var p=n.tRectangle.get(s,a,o,r);s+=p.width;var d=n.tRectangle.get(s,a,e.middleRight.width,r);s=t.x,a+=c.height;var f=n.tRectangle.get(s,a,e.bottomLeft.width,e.bottomLeft.width);s+=f.width;var g=n.tRectangle.get(s,a,o,e.bottomCenter.height);s+=g.width;var y=n.tRectangle.get(s,a,e.bottomRight.width,e.bottomRight.height);i.sprite2(l,e.topLeft),i.sprite2(h,e.topCenter),i.sprite2(u,e.topRight),i.sprite2(c,e.middleLeft),i.sprite2(p,e.middleCenter),i.sprite2(d,e.middleRight),i.sprite2(f,e.bottomLeft),i.sprite2(g,e.bottomCenter),i.sprite2(y,e.bottomRight)}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0),o=function(){function t(t){this.renderer=t,this.scale=1}return t.prototype.image=function(t,e,i,o){t=n.tRectangle.get(t.x*this.scale,t.y*this.scale,t.width*this.scale,t.height*this.scale),this.renderer.image(t,e,i,o)},t}();e.ScaleRenderer=o},function(t,e,i){"use strict";e.__esModule=!0,e.startGameLoop=function(t){var e=performance.now()-t.timeStepSeconds,i=function(n){var o=(n-e)/1e3;e=n,t.update(o),requestAnimationFrame(i)};i(performance.now())}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5),o=function(){function t(t,e){this.timeStepSeconds=t,this.maxUpdatesAllowed=e,this.accumulatedTime=0}return t.prototype.update=function(t){for(this.accumulatedTime+=t,this.accumulatedTime>this.timeStepSeconds*this.maxUpdatesAllowed&&(this.accumulatedTime=this.timeStepSeconds*this.maxUpdatesAllowed);this.accumulatedTime>=this.timeStepSeconds;)this.accumulatedTime-=this.timeStepSeconds,n.gameUpdate(this.timeStepSeconds);n.gameDraw()},t}();e.GameUpdater=o},function(t,e,i){"use strict";e.__esModule=!0;var n=i(9),o=i(0),r=function(){function t(t){this.renderer=t,this.isClipping=!1,this.rectangle=new n.Rectangle(0,0,0,0)}return t.prototype.image=function(t,e,i,n){if(this.isClipping){var r=s(t=o.tRectangle.get(t.x,t.y,t.width,t.height),this.rectangle);if(!r)return;var a=(r.x-t.x)/t.width;n&&(a=(t.x+t.width-(r.x+r.width))/t.width);var l=(r.y-t.y)/t.height,h=(t.width-r.width)/t.width,u=(t.height-r.height)/t.height;e=o.tRectangle.get(e.x+a*e.width,e.y+l*e.height,e.width-h*e.width,e.height-u*e.height),t=r}this.renderer.image(t,e,i,n)},t.prototype.clip=function(t){this.isClipping=null!=t,null!=t&&this.rectangle.set(t.x,t.y,t.width,t.height)},t}();function s(t,e){var i=o.tVector2.get(t.x,t.y),n=o.tVector2.get(t.x+t.width,t.y+t.height),r=o.tVector2.get(e.x,e.y),s=o.tVector2.get(e.x+e.width,e.y+e.height),a=Math.max(i.x,r.x),l=Math.max(i.y,r.y),h=Math.min(n.x,s.x),u=Math.min(n.y,s.y);return a>=h||l>=u?null:o.tRectangle.get(a,l,h-a,u-l)}e.ClipRenderer=r,e.findOverlap=s},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0),o=function(){function t(t){this.renderer=t,this.xOffset=0,this.yOffset=0}return t.prototype.image=function(t,e,i,o){t=n.tRectangle.get(t.x+this.xOffset,t.y+this.yOffset,t.width,t.height),this.renderer.image(t,e,i,o)},t}();e.TranslationRenderer=o},function(t,e,i){t.exports=i.p+"a6bee5af9f7c79f9156186bcc65d0afb.png"}]);